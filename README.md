# BYWG 工业边缘网关管理系统

## 🏗️ 系统架构

BYWG是一个基于微服务架构的工业边缘网关管理系统，采用分布式设计，支持多网关节点部署，提供完整的设备管理、协议支持、实时监控和数据分析功能。

### 架构组件

```
┌─────────────────────────────────────────────────────────────┐
│                    前端管理界面层                              │
│  ┌─────────────────┐  ┌─────────────────┐  ┌──────────────┐ │
│  │   Web管理界面    │  │   移动端界面     │  │   API接口    │ │
│  │  (Vue.js SPA)   │  │   (React Native)│  │   (RESTful)  │ │
│  └─────────────────┘  └─────────────────┘  └──────────────┘ │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    后端服务层                                │
│  ┌─────────────────┐  ┌─────────────────┐  ┌──────────────┐ │
│  │   管理后端服务   │  │   认证服务      │  │   配置服务    │ │
│  │  (BYWG.Admin)   │  │  (BYWG.Auth)   │  │  (BYWG.Config)│ │
│  └─────────────────┘  └─────────────────┘  └──────────────┘ │
│  ┌─────────────────┐  ┌─────────────────┐  ┌──────────────┐ │
│  │   消息队列      │  │   数据库服务    │  │   文件存储    │ │
│  │  (RabbitMQ)     │  │  (PostgreSQL)   │  │  (MinIO)     │ │
│  └─────────────────┘  └─────────────────┘  └──────────────┘ │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    边缘网关层                                │
│  ┌─────────────────┐  ┌─────────────────┐  ┌──────────────┐ │
│  │   网关节点1     │  │   网关节点2     │  │   网关节点N   │ │
│  │  (BYWG.Gateway) │  │  (BYWG.Gateway) │  │  (BYWG.Gateway)│ │
│  └─────────────────┘  └─────────────────┘  └──────────────┘ │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    工业设备层                                │
│  ┌─────────────────┐  ┌─────────────────┐  ┌──────────────┐ │
│  │   PLC设备       │  │   传感器设备     │  │   SCADA系统   │ │
│  │  (Modbus/OPC)   │  │  (MQTT/CoAP)    │  │  (OPC UA)    │ │
│  └─────────────────┘  └─────────────────┘  └──────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 🚀 快速开始

### 环境要求

- Docker 20.10+
- Docker Compose 2.0+
- PowerShell 5.1+ (Windows)
- 8GB+ RAM
- 20GB+ 磁盘空间

### 一键部署

```powershell
# 克隆项目
git clone <repository-url>
cd BYWG

# 复制环境变量配置
copy env.example .env

# 编辑环境变量
notepad .env

# 构建并启动开发环境
.\deploy.ps1 -Build -Start

# 或启动生产环境
.\deploy.ps1 -Environment production -Build -Start
```

### 服务访问地址

| 服务 | 地址 | 说明 |
|------|------|------|
| 前端管理界面 | http://localhost | Vue.js管理界面 |
| 管理API | http://localhost:5000 | 后端API服务 |
| 认证服务 | http://localhost:5001 | 用户认证服务 |
| 配置服务 | http://localhost:5002 | 配置管理服务 |
| 数据库 | localhost:5432 | PostgreSQL数据库 |
| Redis | localhost:6379 | 缓存服务 |
| RabbitMQ管理 | http://localhost:15672 | 消息队列管理 |
| MinIO控制台 | http://localhost:9001 | 对象存储管理 |
| Prometheus | http://localhost:9090 | 监控数据收集 |
| Grafana | http://localhost:3000 | 监控面板 |
| 网关1 | http://localhost:8080 | 边缘网关节点1 |
| 网关2 | http://localhost:8081 | 边缘网关节点2 |

## 📁 项目结构

```
BYWG/
├── device-admin/                 # 前端管理界面 (Vue.js)
│   ├── src/
│   │   ├── views/              # 页面组件
│   │   ├── components/         # 通用组件
│   │   ├── router/             # 路由配置
│   │   └── api/                # API接口
│   ├── Dockerfile              # 前端Docker配置
│   └── nginx.conf              # Nginx配置
├── BYWG.Admin/                 # 管理后端服务
├── BYWG.Gateway/               # 边缘网关服务
├── BYWG.Auth/                  # 认证服务
├── BYWG.Config/                # 配置服务
├── BYWG.Shared/                # 共享库
├── BYWGLib/                    # 工业协议库
├── docker-compose.yml          # 开发环境配置
├── docker-compose.prod.yml     # 生产环境配置
├── deploy.ps1                  # 部署脚本
└── README.md                   # 项目说明
```

## 🔧 功能特性

### 前端管理界面
- **设备管理**: 设备注册、配置、状态监控
- **协议管理**: 支持Modbus、OPC UA、MQTT等工业协议
- **实时监控**: 数据采集、报警管理、历史数据查询
- **用户管理**: 用户权限、角色管理、安全认证
- **系统设置**: 配置管理、日志查看、系统监控

### 边缘网关服务
- **数据采集**: 高性能工业数据采集
- **协议适配**: 多种工业协议支持
- **本地存储**: SQLite本地数据缓存
- **云端同步**: 与管理后端数据同步
- **故障恢复**: 网络中断自动重连

### 后端服务
- **微服务架构**: 服务解耦、独立部署
- **负载均衡**: 多实例部署、自动扩展
- **数据持久化**: PostgreSQL主数据库
- **缓存加速**: Redis高性能缓存
- **消息队列**: RabbitMQ异步处理

## 🛠️ 开发指南

### 本地开发

```powershell
# 启动开发环境
.\deploy.ps1 -Start

# 查看日志
.\deploy.ps1 -Logs

# 查看状态
.\deploy.ps1 -Status

# 停止服务
.\deploy.ps1 -Stop
```

### 生产部署

```powershell
# 生产环境部署
.\deploy.ps1 -Environment production -Build -Start

# 查看生产环境状态
.\deploy.ps1 -Environment production -Status

# 查看生产环境日志
.\deploy.ps1 -Environment production -Logs
```

### 服务管理

```powershell
# 重启服务
.\deploy.ps1 -Restart

# 清理资源
.\deploy.ps1 -Clean

# 查看帮助
.\deploy.ps1
```

## 📊 监控和运维

### 系统监控
- **Prometheus**: 指标收集和存储
- **Grafana**: 可视化监控面板
- **日志聚合**: 集中式日志管理
- **性能监控**: CPU、内存、网络监控

### 数据备份
- **数据库备份**: 自动定时备份
- **配置备份**: 配置版本管理
- **日志归档**: 日志轮转和归档

### 安全配置
- **HTTPS加密**: 全链路SSL/TLS加密
- **JWT认证**: 无状态身份认证
- **RBAC权限**: 基于角色的访问控制
- **网络安全**: 防火墙和访问控制

## 🔒 安全考虑

### 数据安全
- 所有通信采用TLS 1.3加密
- 数据库连接加密
- 敏感数据AES-256加密存储
- 定期安全审计

### 网络安全
- 网关与设备网络隔离
- API网关统一入口
- 访问控制和限流
- 入侵检测和防护

## 📈 性能优化

### 系统性能
- **边缘计算**: 数据就近处理
- **多级缓存**: 内存+Redis缓存
- **异步处理**: 消息队列解耦
- **负载均衡**: 多实例部署

### 数据性能
- **批量处理**: 批量数据采集
- **压缩传输**: 数据压缩传输
- **索引优化**: 数据库索引优化
- **分区存储**: 数据分区存储

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 📞 支持

- 文档: [项目文档](docs/)
- 问题反馈: [GitHub Issues](issues/)
- 讨论: [GitHub Discussions](discussions/)

---

**BYWG 工业边缘网关管理系统** - 让工业数据采集更简单、更可靠、更智能！