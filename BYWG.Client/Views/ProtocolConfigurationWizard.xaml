<Window x:Class="BYWG.Client.Views.ProtocolConfigurationWizard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="协议配置向导" Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 标题栏 -->
        <Border Grid.Row="0" Background="#2E3440" Padding="15">
            <StackPanel>
                <TextBlock Text="协议配置向导" FontSize="20" FontWeight="Bold" Foreground="White"/>
                <TextBlock x:Name="StepTitleText" Text="步骤 1: 选择协议类型" FontSize="14" Foreground="LightGray" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- 主要内容区域 -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- 左侧：步骤导航 -->
            <Border Grid.Column="0" BorderBrush="#4C566A" BorderThickness="1" Margin="0,0,10,0">
                <StackPanel Margin="15">
                    <TextBlock Text="配置步骤" FontSize="16" FontWeight="Bold" Foreground="#2E3440" Margin="0,0,0,15"/>
                    
                    <StackPanel x:Name="StepNavigation">
                        <!-- 步骤1 -->
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Ellipse x:Name="Step1Indicator" Width="20" Height="20" Fill="#4C566A" Margin="0,0,10,0"/>
                            <TextBlock Text="1. 选择协议类型" FontSize="12" VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- 步骤2 -->
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Ellipse x:Name="Step2Indicator" Width="20" Height="20" Fill="#E5E7EB" Margin="0,0,10,0"/>
                            <TextBlock Text="2. 配置连接参数" FontSize="12" VerticalAlignment="Center" Foreground="Gray"/>
                        </StackPanel>
                        
                        <!-- 步骤3 -->
                        <!-- 第3步(数据点)已取消 -->
                        <StackPanel Orientation="Horizontal" Margin="0,5" Visibility="Collapsed">
                            <Ellipse x:Name="Step3Indicator" Width="20" Height="20" Fill="#E5E7EB" Margin="0,0,10,0"/>
                            <TextBlock Text="3. 配置数据点" FontSize="12" VerticalAlignment="Center" Foreground="Gray"/>
                        </StackPanel>
                        
                        <!-- 步骤4 -->
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Ellipse x:Name="Step4Indicator" Width="20" Height="20" Fill="#E5E7EB" Margin="0,0,10,0"/>
                            <TextBlock Text="4. 确认配置" FontSize="12" VerticalAlignment="Center" Foreground="Gray"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- 右侧：配置内容 -->
            <Border Grid.Column="1" BorderBrush="#4C566A" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- 配置内容区域 -->
                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                        <StackPanel x:Name="ConfigurationContent" Margin="20">
                            <!-- 步骤1: 选择协议类型 -->
                            <StackPanel x:Name="Step1Content">
                                <TextBlock Text="选择协议类型" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>
                                
                                <StackPanel Margin="0,0,0,20">
                                    <RadioButton x:Name="ModbusRadioButton" Content="Modbus TCP/RTU" FontSize="14" Margin="0,5" 
                                                 Tag="MODBUS_TCP" Checked="ProtocolType_Checked"/>
                                    <TextBlock Text="适用于大多数工业设备，支持TCP和RTU模式" FontSize="12" Foreground="Gray" Margin="25,0,0,10"/>
                                    
                                    <RadioButton x:Name="S7RadioButton" Content="西门子 S7" FontSize="14" Margin="0,5" 
                                                 Tag="S7" Checked="ProtocolType_Checked"/>
                                    <TextBlock Text="适用于西门子S7系列PLC" FontSize="12" Foreground="Gray" Margin="25,0,0,10"/>
                                    
                                    <RadioButton x:Name="MCRadioButton" Content="三菱 MC" FontSize="14" Margin="0,5" 
                                                 Tag="MC" Checked="ProtocolType_Checked"/>
                                    <TextBlock Text="适用于三菱PLC，支持Qna-3E、3C、4C、4E" FontSize="12" Foreground="Gray" Margin="25,0,0,10"/>
                                </StackPanel>
                                
                                <TextBlock Text="协议模板" FontSize="14" FontWeight="Bold" Margin="0,20,0,10"/>
                                <ComboBox x:Name="TemplateComboBox" Width="300" Margin="0,0,0,10" SelectionChanged="TemplateComboBox_SelectionChanged">
                                    <ComboBoxItem Content="自定义配置" Tag=""/>
                                    <ComboBoxItem Content="Modbus TCP - 标准配置" Tag="modbus_tcp_standard"/>
                                    <ComboBoxItem Content="西门子 S7-1200" Tag="s7_1200"/>
                                    <ComboBoxItem Content="西门子 S7-1500" Tag="s7_1500"/>
                                    <ComboBoxItem Content="三菱 Q系列 - Qna-3E" Tag="mitsubishi_qna3e"/>
                                    <ComboBoxItem Content="三菱 FX系列 - 3C" Tag="mitsubishi_fx3c"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <!-- 步骤2: 配置连接参数 -->
                            <StackPanel x:Name="Step2Content" Visibility="Collapsed">
                                <TextBlock Text="配置连接参数" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>
                                
                                <!-- Modbus TCP 配置 -->
                                <StackPanel x:Name="ModbusConfigPanel" Visibility="Collapsed">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="协议名称:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="0" Grid.Column="1" x:Name="ModbusNameTextBox" Text="Modbus_Device" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="IP地址:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="1" Grid.Column="1" x:Name="ModbusIpTextBox" Text="192.168.1.100" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="端口:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="2" Grid.Column="1" x:Name="ModbusPortTextBox" Text="502" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="3" Grid.Column="0" Text="从站地址:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="3" Grid.Column="1" x:Name="ModbusSlaveTextBox" Text="1" Margin="0,5"/>
                                    </Grid>
                                </StackPanel>
                                
                                <!-- S7 配置 -->
                                <StackPanel x:Name="S7ConfigPanel" Visibility="Collapsed">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="协议名称:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="0" Grid.Column="1" x:Name="S7NameTextBox" Text="S7_Device" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="IP地址:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="1" Grid.Column="1" x:Name="S7IpTextBox" Text="192.168.1.100" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="端口:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="2" Grid.Column="1" x:Name="S7PortTextBox" Text="102" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="3" Grid.Column="0" Text="机架号:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="3" Grid.Column="1" x:Name="S7RackTextBox" Text="0" Margin="0,5"/>
                                    </Grid>
                                </StackPanel>
                                
                                <!-- MC 配置 -->
                                <StackPanel x:Name="MCConfigPanel" Visibility="Collapsed">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="协议名称:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="0" Grid.Column="1" x:Name="MCNameTextBox" Text="MC_Device" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="IP地址:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="1" Grid.Column="1" x:Name="MCIpTextBox" Text="192.168.1.100" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="端口:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="2" Grid.Column="1" x:Name="MCPortTextBox" Text="5007" Margin="0,5"/>
                                        
                                        <TextBlock Grid.Row="3" Grid.Column="0" Text="协议类型:" VerticalAlignment="Center" Margin="0,5"/>
                                        <ComboBox Grid.Row="3" Grid.Column="1" x:Name="MCProtocolTypeComboBox" Margin="0,5">
                                            <ComboBoxItem Content="Qna-3E (以太网)" Tag="Qna3E" IsSelected="True"/>
                                            <ComboBoxItem Content="3C (串行)" Tag="MC3C"/>
                                            <ComboBoxItem Content="4C (串行)" Tag="MC4C"/>
                                            <ComboBoxItem Content="4E (以太网)" Tag="MC4E"/>
                                        </ComboBox>
                                        
                                        <TextBlock Grid.Row="4" Grid.Column="0" Text="网络号:" VerticalAlignment="Center" Margin="0,5"/>
                                        <TextBox Grid.Row="4" Grid.Column="1" x:Name="MCNetworkTextBox" Text="0" Margin="0,5"/>
                                    </Grid>
                                </StackPanel>
                            </StackPanel>
                            
                            <!-- 步骤3: 配置数据点（已取消，统一到节点管理） -->
                            <StackPanel x:Name="Step3Content" Visibility="Collapsed"/>
                            
                            <!-- 步骤4: 确认配置 -->
                            <StackPanel x:Name="Step4Content" Visibility="Collapsed">
                                <TextBlock Text="确认配置" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>
                                
                                <Border BorderBrush="#4C566A" BorderThickness="1" Padding="15">
                                    <StackPanel>
                                        <TextBlock Text="协议配置摘要" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="120"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            
                                            <TextBlock Grid.Row="0" Grid.Column="0" Text="协议类型:" FontWeight="Bold"/>
                                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="SummaryProtocolType"/>
                                            
                                            <TextBlock Grid.Row="1" Grid.Column="0" Text="协议名称:" FontWeight="Bold"/>
                                            <TextBlock Grid.Row="1" Grid.Column="1" x:Name="SummaryProtocolName"/>
                                            
                                            <TextBlock Grid.Row="2" Grid.Column="0" Text="连接地址:" FontWeight="Bold"/>
                                            <TextBlock Grid.Row="2" Grid.Column="1" x:Name="SummaryConnection"/>
                                            
                                            <TextBlock Grid.Row="3" Grid.Column="0" Text="数据点数量:" FontWeight="Bold"/>
                                            <TextBlock Grid.Row="3" Grid.Column="1" x:Name="SummaryDataPoints"/>
                                            
                                            <TextBlock Grid.Row="4" Grid.Column="0" Text="配置状态:" FontWeight="Bold"/>
                                            <TextBlock Grid.Row="4" Grid.Column="1" x:Name="SummaryStatus" Foreground="Green"/>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- 按钮区域 -->
                    <Border Grid.Row="1" Background="#F8F9FA" Padding="15">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button x:Name="PreviousButton" Content="上一步" Width="80" Margin="0,0,10,0" 
                                    Click="PreviousButton_Click" IsEnabled="False"/>
                            <Button x:Name="NextButton" Content="下一步" Width="80" Margin="0,0,10,0" 
                                    Click="NextButton_Click"/>
                            <Button x:Name="FinishButton" Content="完成" Width="80" 
                                    Click="FinishButton_Click" Visibility="Collapsed"/>
                            <Button Content="取消" Width="80" Click="CancelButton_Click"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
